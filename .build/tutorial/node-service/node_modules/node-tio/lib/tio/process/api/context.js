


/**
 * @constructor
 * @param {!tio.process.Endpoint} endpoint
 * @param {!tio.process.Worker} worker
 */
tio.process.api.Context = function(endpoint, worker) {

  /**
   * @type {!tio.process.Worker}
   */
  this.__worker = worker;

  /**
   * @type {!tio.process.Endpoint}
   */
  this.__endpoint = endpoint;
};


/**
 * @param {!yaa.CompleteHandler} complete
 * @param {!yaa.ErrorHandler} cancel
 */
tio.process.api.Context.prototype.init = function(complete, cancel) {
  this.__worker.init(complete, cancel);
};


/**
 * @param {!yaa.CompleteHandler} complete
 * @param {!yaa.ErrorHandler} cancel
 */
tio.process.api.Context.prototype.destroy = function(complete, cancel) {
  var self = this;

  function destroy() {
    self.__worker.destroy(complete, cancel);
  }

  this.__endpoint.close(destroy, cancel);
};


/**
 * @param {!yaa.CompleteHandler} complete
 * @param {!yaa.ErrorHandler} cancel
 */
tio.process.api.Context.prototype.listen = function(complete, cancel) {
  this.__endpoint.listen(complete, cancel,
      this.__worker.listener());
};
