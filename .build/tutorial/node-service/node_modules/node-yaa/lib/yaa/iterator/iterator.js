

/**
 * @param {!Array=} opt_array
 * @return {!yaa.Step}
 */
yaa.iterator.array = function(opt_array) {
  var i = -1;

  /**
   * @param {!yaa.CompleteHandler} complete
   * @param {!yaa.ErrorHandler} cancel
   */
  function iteratorByArgs(complete, cancel) {
    complete(opt_array[i += 1]);
  }


  /**
   * @param {!yaa.CompleteHandler} complete
   * @param {!yaa.ErrorHandler} cancel
   * @param {!Array} state
   */
  function iteratorByState(complete, cancel, state) {
    complete(state[i += 1]);
  }


  if (opt_array instanceof Array) {
    return yaa.esc(iteratorByArgs);
  } else {
    return yaa.esc(iteratorByState);
  }

};
