/**
 * @param {!Array.<!yaa.Step>} cases
 * @param {string} name
 * @param {yaa.Context} opt_context
 * @return {!yaa.Step}
 */
module.exports = function(cases, name, opt_context) {

  /**
   * @param {!yaa.CompleteHandler} complete
   * @param {!yaa.ErrorHandler} cancel
   */
  function test(complete, cancel) {
    function run() {
      if (cases.length > 0) {
        console.info('Test ' + name + ' have ' + cases.length + ' more steps.');
        cases.shift().call(opt_context || null, run, cancel);
      } else {
        console.info('Test ' + name + ' completed.');

        complete();
      }
    }

    run();
  }

  return test;
};